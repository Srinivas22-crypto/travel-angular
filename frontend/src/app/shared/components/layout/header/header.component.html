<header class="header">
  <div class="header-container">
    <!-- Logo and Brand -->
    <div class="brand">
      <a routerLink="/home" class="brand-link">
        <div class="brand-icon">âœˆï¸</div>
        <div class="brand-info">
          <span class="brand-text">TravelHub</span>
          <span class="brand-tagline">Your Journey Starts Here</span>
        </div>
      </a>
    </div>

    <!-- Main Navigation -->
    <nav class="main-nav">
      <!-- Explore Dropdown -->
      <div class="nav-dropdown" (mouseenter)="showDropdown('explore')" (mouseleave)="hideDropdown('explore')">
        <button class="nav-button">
          <span class="nav-icon">ğŸ“</span>
          <span>Explore</span>
          <span class="dropdown-arrow">â–¼</span>
        </button>
        <div class="dropdown-menu" [class.show]="activeDropdown === 'explore'">
          <a routerLink="/destinations" class="dropdown-item">
            <span class="item-icon">ğŸŒ</span>
            <div class="item-content">
              <span class="item-title">Destinations</span>
              <span class="item-subtitle">Discover amazing places</span>
            </div>
          </a>
          <a routerLink="/experiences" class="dropdown-item">
            <span class="item-icon">ğŸ¯</span>
            <div class="item-content">
              <span class="item-title">Experiences</span>
              <span class="item-subtitle">Unique activities</span>
            </div>
          </a>
          <a routerLink="/guides" class="dropdown-item">
            <span class="item-icon">ğŸ“–</span>
            <div class="item-content">
              <span class="item-title">Travel Guides</span>
              <span class="item-subtitle">Expert recommendations</span>
            </div>
          </a>
        </div>
      </div>

      <!-- Book Dropdown -->
      <div class="nav-dropdown" (mouseenter)="showDropdown('book')" (mouseleave)="hideDropdown('book')">
        <button class="nav-button">
          <span class="nav-icon">ğŸ“…</span>
          <span>Book</span>
          <span class="dropdown-arrow">â–¼</span>
        </button>
        <div class="dropdown-menu" [class.show]="activeDropdown === 'book'">
          <a routerLink="/bookings/flights" class="dropdown-item">
            <span class="item-icon">âœˆï¸</span>
            <div class="item-content">
              <span class="item-title">Flights</span>
              <span class="item-subtitle">Find the best deals</span>
            </div>
          </a>
          <a routerLink="/bookings/hotels" class="dropdown-item">
            <span class="item-icon">ğŸ¨</span>
            <div class="item-content">
              <span class="item-title">Hotels</span>
              <span class="item-subtitle">Book your stay</span>
            </div>
          </a>
          <a routerLink="/bookings/cars" class="dropdown-item">
            <span class="item-icon">ğŸš—</span>
            <div class="item-content">
              <span class="item-title">Car Rental</span>
              <span class="item-subtitle">Rent a vehicle</span>
            </div>
          </a>
        </div>
      </div>

      <!-- Community Link -->
      <a routerLink="/community" class="nav-link">
        <span class="nav-icon">ğŸ‘¥</span>
        <span>Community</span>
      </a>
    </nav>

    <!-- Right Side Controls -->
    <div class="header-controls">
      <!-- Search -->
      <div class="search-container" [class.expanded]="isSearchExpanded">
        <button class="search-toggle" (click)="toggleSearch()">
          <span class="search-icon">ğŸ”</span>
        </button>
        <input
          #searchInput
          type="text"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          (blur)="onSearchBlur()"
          placeholder="Search"
          class="search-input"
          name="search"
        />
        <button *ngIf="isSearchExpanded && searchQuery" class="search-clear" (click)="clearSearch()">
          <span>âœ•</span>
        </button>
      </div>

      <!-- Notifications -->
      <button class="notification-btn" *ngIf="isAuthenticated$ | async">
        <span class="notification-icon">ğŸ””</span>
        <span class="notification-badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
      </button>

      <!-- Language & Region -->
      <div class="language-selector">
        <button class="language-btn">
          <span class="flag-icon">ğŸ‡ºğŸ‡¸</span>
          <span>English</span>
        </button>
      </div>

      <!-- Theme Toggle -->
      <button (click)="toggleTheme()" class="theme-toggle" title="Toggle theme">
        <span *ngIf="!(isDarkMode$ | async)">ğŸŒ™</span>
        <span *ngIf="isDarkMode$ | async">â˜€ï¸</span>
      </button>

      <!-- User Menu -->
      <div class="user-menu" *ngIf="isAuthenticated$ | async; else authButtons">
        <button (click)="toggleUserMenu()" class="user-button">
          <img
            [src]="(currentUser$ | async)?.avatar || '/assets/default-avatar.png'"
            [alt]="(currentUser$ | async)?.name"
            class="user-avatar"
          />
        </button>

        <div class="user-dropdown" [class.show]="isUserMenuOpen">
          <div class="user-info">
            <img
              [src]="(currentUser$ | async)?.avatar || '/assets/default-avatar.png'"
              [alt]="(currentUser$ | async)?.name"
              class="user-avatar-large"
            />
            <div class="user-details">
              <span class="user-name">{{ (currentUser$ | async)?.name }}</span>
              <span class="user-email">{{ (currentUser$ | async)?.email }}</span>
            </div>
          </div>
          <div class="dropdown-divider"></div>
          <a routerLink="/profile" class="dropdown-item" (click)="toggleUserMenu()">
            <span class="dropdown-icon">ğŸ‘¤</span>
            Profile Settings
          </a>
          <a routerLink="/bookings" class="dropdown-item" (click)="toggleUserMenu()">
            <span class="dropdown-icon">ğŸ“‹</span>
            My Bookings
          </a>
          <a routerLink="/favorites" class="dropdown-item" (click)="toggleUserMenu()">
            <span class="dropdown-icon">â¤ï¸</span>
            Favorites
          </a>
          <div class="dropdown-divider"></div>
          <button (click)="logout()" class="dropdown-item logout">
            <span class="dropdown-icon">ğŸšª</span>
            Logout
          </button>
        </div>
      </div>

      <!-- Auth Buttons (Not logged in) -->
      <ng-template #authButtons>
        <div class="auth-buttons">
          <a routerLink="/auth/signin" class="auth-link signin">Sign In</a>
          <a routerLink="/auth/register" class="auth-link register">Register</a>
        </div>
      </ng-template>

      <!-- Mobile Menu Toggle -->
      <button (click)="toggleMobileMenu()" class="mobile-menu-toggle">
        <span class="hamburger" [class.active]="isMobileMenuOpen"></span>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav" [class.open]="isMobileMenuOpen">
    <div class="mobile-nav-content">
      <a routerLink="/home" class="mobile-nav-link" (click)="closeMobileMenu()">
        <span class="nav-icon">ğŸ </span>
        Home
      </a>
      <a routerLink="/explore" class="mobile-nav-link" (click)="closeMobileMenu()">
        <span class="nav-icon">ğŸ“</span>
        Explore
      </a>
      <a routerLink="/bookings/flights" class="mobile-nav-link" (click)="closeMobileMenu()">
        <span class="nav-icon">âœˆï¸</span>
        Flights
      </a>
      <a routerLink="/bookings/hotels" class="mobile-nav-link" (click)="closeMobileMenu()">
        <span class="nav-icon">ğŸ¨</span>
        Hotels
      </a>
      <a routerLink="/community" class="mobile-nav-link" (click)="closeMobileMenu()">
        <span class="nav-icon">ğŸ‘¥</span>
        Community
      </a>
      <div class="mobile-nav-divider"></div>
      <div class="mobile-nav-controls">
        <button (click)="toggleTheme()" class="mobile-control-btn">
          <span *ngIf="!(isDarkMode$ | async)">ğŸŒ™</span>
          <span *ngIf="isDarkMode$ | async">â˜€ï¸</span>
          <span>Theme</span>
        </button>
        <button class="mobile-control-btn">
          <span>ğŸ‡ºğŸ‡¸</span>
          <span>English</span>
        </button>
      </div>
    </div>
  </nav>
</header>
